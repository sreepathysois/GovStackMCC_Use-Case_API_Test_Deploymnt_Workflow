version: 2.1


jobs:  
  build-and-test:    
    docker:
      - image: sreedocker123/govstackmccapitestcircleci:latest
        auth:
          username: sreedocker123
          password: docker@123
    steps:
      - run:
          name: Setup MCC API and Prepare for test 
          command: |            
            docker run -it -d -p 8000:8000  sreedocker123/govstackmccapitestcircleci:latest        
      - run:
          name: Run Selenium Automated Test Scripts For API Integration Test
          command: cd /app/test && pytest
    
workflows:  
  build-test-and-deploy:    
    jobs:      
      - build-and-test:
          filters:            
            branches:
              only:
                - master
